---
layout: default
---

<div class="breadcrumb">
    <a href="{{ site.baseurl }}/">â† å›åˆ°é¦–é </a>
</div>

<div class="character-gallery-page">
    <h2>ğŸ­ è§’è‰²åœ–é‘‘ - {{ site.data.characters[0].series }}</h2>
    
    <!-- é™£ç‡Ÿç¯©é¸æŒ‰éˆ• -->
    <div class="faction-filters">
        <button class="filter-btn active" data-faction="all">å…¨éƒ¨</button>
        <button class="filter-btn" data-faction="é­”æ³•å°‘å¥³çµ„ç¹”">é­”æ³•å°‘å¥³</button>
        <button class="filter-btn" data-faction="æš—å½±æ•™åœ˜">æš—å½±æ•™åœ˜</button>
        <button class="filter-btn" data-faction="å…¶ä»–">å…¶ä»–</button>
    </div>
    
    <!-- è§’è‰²å¡ç‰‡ç¶²æ ¼ -->
    <div class="characters-grid">
        {% for character in site.data.characters %}
        <div class="character-card" data-faction="{{ character.faction }}" data-id="{{ character.id }}">
            <div class="character-image">
                {% if character.image != "" %}
                <img src="{{ site.baseurl }}/assets/images/characters/{{ character.image }}" alt="{{ character.name }}">
                {% else %}
                <div class="placeholder-silhouette">
                    <span>?</span>
                </div>
                {% endif %}
            </div>
            <div class="character-id">{{ character.id }}</div>
            <div class="character-name">{{ character.name }}</div>
            <div class="character-tagline">ã€Œ{{ character.tagline }}ã€</div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- å½ˆå‡ºè¦–çª— -->
<div id="characterModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div class="modal-body">
            <div class="modal-left">
                <div id="modalImage"></div>
            </div>
            <div class="modal-right">
                <h3 id="modalId"></h3>
                <h2 id="modalName"></h2>
                <p id="modalTagline"></p>
                <div class="modal-info">
                    <p><strong>é™£ç‡Ÿ:</strong> <span id="modalFaction"></span></p>
                    <p id="modalEra"></p>
                    <div id="modalTags"></div>
                </div>
                <div class="modal-images">
                    <h4>ç›¸é—œå‰µä½œ:</h4>
                    <div id="modalRelatedImages"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// è§’è‰²è³‡æ–™
const characters = {{ site.data.characters | jsonify }};

// é™£ç‡Ÿç¯©é¸
document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        // åˆ‡æ› active ç‹€æ…‹
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        
        const faction = this.getAttribute('data-faction');
        const cards = document.querySelectorAll('.character-card');
        
        cards.forEach(card => {
            if (faction === 'all' || card.getAttribute('data-faction') === faction) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    });
});

// é»æ“Šè§’è‰²å¡ç‰‡æ‰“é–‹å½ˆå‡ºè¦–çª—
document.querySelectorAll('.character-card').forEach(card => {
    card.addEventListener('click', function() {
        const id = this.getAttribute('data-id');
        const character = characters.find(c => c.id === id);
        openModal(character);
    });
});

// æ‰“é–‹å½ˆå‡ºè¦–çª—
function openModal(character) {
    const modal = document.getElementById('characterModal');
    
    // å¡«å……åœ–ç‰‡
    const modalImage = document.getElementById('modalImage');
    if (character.image) {
        modalImage.innerHTML = `<img src="{{ site.baseurl }}/assets/images/characters/${character.image}" alt="${character.name}">`;
    } else {
        modalImage.innerHTML = '<div class="placeholder-silhouette-large"><span>?</span></div>';
    }
    
    // å¡«å……åŸºæœ¬è³‡æ–™
    document.getElementById('modalId').textContent = character.id;
    document.getElementById('modalName').textContent = character.name;
    document.getElementById('modalTagline').textContent = `ã€Œ${character.tagline}ã€`;
    document.getElementById('modalFaction').textContent = character.faction;
    
    // åƒè€ƒå²å¯¦
    const eraElement = document.getElementById('modalEra');
    if (character.reference_era) {
        eraElement.innerHTML = `<strong>åƒè€ƒå²å¯¦:</strong> ${character.reference_era}`;
        eraElement.style.display = 'block';
    } else {
        eraElement.style.display = 'none';
    }
    
    // æ¨™ç±¤
    const tagsElement = document.getElementById('modalTags');
    if (character.tags && character.tags.length > 0) {
        tagsElement.innerHTML = character.tags.map(tag => 
            `<span class="tag">#${tag}</span>`
        ).join('');
    } else {
        tagsElement.innerHTML = '';
    }
    
    // ç›¸é—œåœ–ç‰‡
    const relatedImagesElement = document.getElementById('modalRelatedImages');
    if (character.related_images && character.related_images.length > 0) {
        relatedImagesElement.innerHTML = character.related_images.map(img => 
            `<img src="{{ site.baseurl }}/assets/images/${img}" alt="ç›¸é—œå‰µä½œ">`
        ).join('');
    } else {
        relatedImagesElement.innerHTML = '<p style="color: #999;">å°šæœªæ–°å¢ç›¸é—œå‰µä½œ</p>';
    }
    
    modal.style.display = 'block';
}

// é—œé–‰å½ˆå‡ºè¦–çª—
document.querySelector('.close').addEventListener('click', function() {
    document.getElementById('characterModal').style.display = 'none';
});

window.addEventListener('click', function(event) {
    const modal = document.getElementById('characterModal');
    if (event.target === modal) {
        modal.style.display = 'none';
    }
});
</script>